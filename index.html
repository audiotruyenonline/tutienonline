
<!DOCTYPE html>

<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ğŸ“– Nghe Truyá»‡n Audio</title>
<style>
    :root {
      --bg: #121212;
      --text: #ffffff;
      --primary: #3a3a3a;
      --card: #1e1e1e;
      --border: #2c2c2c;
    }

    body {
      margin: 0;
      font-family: sans-serif;
      background: var(--bg);
      color: var(--text);
      overflow-x: hidden;
    }

    header {
      background: var(--primary);
      color: white;
      padding: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    #menuToggle {
      font-size: 24px;
      background: none;
      border: none;
      color: white;
      cursor: pointer;
    }

    #searchInput {
      flex: 1;
      padding: 6px;
      border-radius: 4px;
      border: none;
      outline: none;
      font-size: 16px;
    }

    main {
      padding: 10px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .story-card {
  background: #222;
  border-radius: 10px;
  padding: 8px;
  margin: 0 auto;          /* ğŸ‘ˆ cÄƒn giá»¯a khung */
  max-width: 100px;        /* ğŸ‘ˆ thu háº¹p chiá»u rá»™ng */
  cursor: pointer;
  transition: transform 0.2s ease;

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  text-align: center;
  height: 100%;
}

    .story-header {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
    }

    .story-card img {
      width: 100%;
      height: auto;
      border-radius: 8px;
      object-fit: cover;

      width: 100px;
      height: 100px;
      border-radius: 8px;
      object-fit: cover;
      margin-bottom: 8px;
    }

    .story-info {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }

    .story-info h3 {
  font-size: 14px;
  font-weight: bold;
  margin: 0;
  height: 36px;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  color: #00bfff; /* ğŸ‘ˆ mÃ u chá»¯ má»›i */
}

    .story-info p {
      margin: 0;
      font-size: 13px;
      color: #bbb;
    }

    .audio-player {
      margin-top: 16px;
      background: #292929;
      padding: 12px;
      border-radius: 8px;
    }

    .audio-player .controls {
  display: flex;
  gap: 12px;
  align-items: center;
  justify-content: center; /* ğŸ‘ˆ cÄƒn giá»¯a hÃ ng ngang */
  flex-wrap: wrap;
  margin-top: 8px;
}

    .audio-player button {
      background: #444;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 12px;
      cursor: pointer;
      font-size: 22px;
    }

    .audio-player button:hover {
      background: #666;
    }

    .audio-player input[type="range"] {
      vertical-align: middle;
    }

    .audio-player .progress-container {
  width: 100%;
  max-width: 600px;
  margin: 0 auto 8px;
}

.audio-player #progressBar {
  width: 100%;
  height: 6px;
  border-radius: 4px;
  background: #555;
  accent-color: #00e676; /* mÃ u thanh khi kÃ©o */
}

    button.back-btn {
      margin-top: 20px;
      padding: 10px 16px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }

    #sidebar {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 250px;
      height: 100vh;
      background: #2a2a2a;
      color: white;
      z-index: 999;
      padding: 20px;
      box-shadow: 2px 0 5px rgba(0,0,0,0.5);
      transform: translateX(-100%);
      transition: transform 0.3s ease;
    }

    #sidebar.active {
      display: block;
      transform: translateX(0);
    }

    #overlay {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 998;
    }

    #overlay.active {
      display: block;
    }

    .story-container {
      background: #1b1b1b;
      padding: 10px;
      border-radius: 12px;
      border: 1px solid var(--border);
    }

    h2, h3 {
      margin: 0 0 8px;
    }

    .story-info button {
      margin-top: 6px;
      padding: 6px 12px;
      background: #00bcd4;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }

    .story-info .description-box {
      max-height: 60px;
      overflow: hidden;
      padding: 4px 6px;
      border-radius: 6px;
      background: #222;
      font-size: 14px;
      color: #ccc;
    }

  
.pagination button {
  padding: 6px 12px;
  border: none;
  border-radius: 4px;
  background: #444;
  color: white;
  cursor: pointer;
}
.pagination button.active {
  background: #00bcd4;
}

.support-admin {
  background: #1e1e1e;
  border: 1px solid var(--border);
  border-radius: 12px;
  margin: 20px 10px;
  padding: 16px;
  text-align: center;
  color: #fff;
}

.support-admin h3 {
  margin-bottom: 10px;
  color: #00bcd4;
}

.support-admin .donate-buttons {
  margin-top: 10px;
  display: flex;
  justify-content: center;
  gap: 12px;
  flex-wrap: wrap;
}

.support-admin .donate-buttons button {
  background: #444;
  color: white;
  border: none;
  border-radius: 6px;
  padding: 10px 16px;
  cursor: pointer;
  font-size: 14px;
}

.support-admin .donate-buttons button:hover {
  background: #666;
}

.footer {
  background: #111;
  color: white;
  padding: 20px 10px;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-around;
  font-size: 14px;
  margin-top: 30px;
  border-top: 1px solid var(--border);
}

.footer-column {
  flex: 1 1 200px;
  padding: 10px;
}

.footer-column h4 {
  color: #00bcd4;
  margin-bottom: 10px;
}

.footer-column ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.footer-column ul li {
  margin-bottom: 6px;
  border-bottom: 1px solid #333;
  padding-bottom: 4px;
}

.fancy-border {
  border: 2px solid #00bcd4;
  border-radius: 16px;
  padding: 16px;
  background: linear-gradient(to bottom, #1b1b1b, #141414);
  box-shadow: 0 4px 20px rgba(255, 118, 164, 0.2);
  margin: 20px;
}

.story-title {
  color: #00bcd4;
  font-size: 22px;
  text-align: center;
  margin-bottom: 20px;
  border-bottom: 1px solid #444;
  padding-bottom: 10px;
}

.story-card {
  background: #222;
  border-radius: 14px;
  padding: 12px;
  max-width: 180px;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  height: 100%;
}
.story-card:hover {
  transform: scale(1.05);
  box-shadow: 0 8px 16px rgba(0, 188, 212, 0.25);
}
.story-card img {
  width: 100%;
  height: 180px;
  border-radius: 12px;
  object-fit: cover;
  margin-bottom: 10px;
}
.story-info h3 {
  font-size: 16px;
  font-weight: 600;
  color: #00e676;
  height: 38px;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}
.story-info .description-box {
  font-size: 13px;
  color: #bbb;
  text-align: center;
  line-height: 1.4;
  max-height: 48px;
  overflow: hidden;
}
#storyList {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 24px;
  padding: 16px;
}
.story-container.fancy-border {
  padding: 24px;
  border-radius: 20px;
  border: 2px solid #00bcd4;
  background: linear-gradient(to bottom, #1b1b1b, #121212);
}
.story-title {
  font-size: 24px;
  font-weight: bold;
  color: #00bcd4;
  text-align: center;
  padding-bottom: 12px;
  margin-bottom: 24px;
  border-bottom: 1px solid #444;
}


# #storyList {
  display: grid;
  grid-template-columns: repeat(3, 1fr); /* ğŸ‘ˆ luÃ´n 3 cá»™t */
  gap: 36px 20px; /* khoáº£ng cÃ¡ch dá»c - ngang */
  padding: 16px;
}
.story-card {
  background: #1e1e1e;
  border-radius: 12px;
  overflow: hidden;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  cursor: pointer;
  display: flex;
  flex-direction: column;
}
.story-card:hover {
  transform: scale(1.03);
  box-shadow: 0 6px 12px rgba(0,188,212,0.2);
}
.story-card img {
  width: 100%;
  height: 160px;
  object-fit: cover;
}
.story-info {
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.story-info h3 {
  font-size: 15px;
  font-weight: 600;
  color: #00e676;
  line-height: 1.3;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.story-info p {
  font-size: 13px;
  color: #aaa;
  margin: 0;
}
.tag {
  font-size: 12px;
  padding: 2px 6px;
  border-radius: 6px;
  background: #333;
  color: #00bcd4;
  display: inline-block;
  margin-top: 4px;
}

#storyList {
  display: flex;
  flex-direction: column;
  gap: 20px;
  padding: 16px;
}

.story-row {
  display: flex;
  background: #1e1e1e;
  border-radius: 12px;
  padding: 12px;
  gap: 16px;
  align-items: center;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  transition: 0.2s ease;
  cursor: pointer;
}
.story-row:hover {
  transform: scale(1.02);
}
.story-thumb {
  width: 100px;
  height: 100px;
  object-fit: cover;
  border-radius: 10px;
}
.story-meta {
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.story-meta h3 {
  font-size: 16px;
  color: #00e676;
  margin: 0;
}
.story-meta p {
  margin: 0;
  color: #bbb;
  font-size: 14px;
}

.story-meta .description-box {
  font-size: 13px;
  color: #bbb;
  line-height: 1.4;
  display: -webkit-box;
  -webkit-line-clamp: 2;        /* ğŸ‘ˆ Chá»‰ hiá»ƒn thá»‹ 2 dÃ²ng */
  -webkit-box-orient: vertical;
  overflow: hidden;
  max-height: 44px;
}

.blinking-text {
  text-align: center;
  font-size: 14px;
  margin-bottom: 10px;
  font-weight: bold;
  animation: blinkColor 1.5s infinite;
}

@keyframes blinkColor {
  0%   { color: #00bcd4; }
  25%  { color: #ff4081; }
  50%  { color: #ffc107; }
  75%  { color: #4caf50; }
  100% { color: #00bcd4; }
}

.chapter-container {
  background: #1a1a1a;
  padding: 16px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,188,212,0.15);
}

.chapter-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 14px;
}

.chapter-table thead {
  background: #00bcd4;
  color: #fff;
}

.chapter-table th, .chapter-table td {
  padding: 10px;
  text-align: left;
  border-bottom: 1px solid #333;
}

.chapter-table tr {
  cursor: pointer;
  transition: background 0.2s;
}

.chapter-table tr:hover {
  background: #2a2a2a;
}

.chapter-table button {
  background: #00e676;
  color: black;
  border: none;
  padding: 6px 12px;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.2s;
}

.chapter-table button:hover {
  background: #00c853;
}

.story-list-grid {
  display: flex;
  flex-direction: column;
  gap: 12px;
  max-height: 450px;
  overflow-y: auto;
}
.mini-row {
  display: flex;
  align-items: center;
  gap: 12px;
  background: #1e1e1e;
  padding: 10px;
  border-radius: 10px;
  cursor: pointer;
  transition: 0.2s ease;
}
.mini-row:hover {
  transform: scale(1.01);
  background: #2a2a2a;
}
.mini-thumb {
  width: 60px;
  height: 60px;
  object-fit: cover;
  border-radius: 8px;
}
.mini-info h4 {
  margin: 0;
  font-size: 14px;
  color: #00e676;
}
.mini-info p {
  margin: 0;
  font-size: 13px;
  color: #aaa;
}
.pagination-button {
  padding: 6px 12px;
  border: none;
  border-radius: 6px;
  background: #444;
  color: white;
  cursor: pointer;
}
.pagination-button.active {
  background: #00bcd4;
  font-weight: bold;
}
</style>
</head>
<body>
<div id="sidebar">
<h2>ğŸ“š Menu</h2>
<ul>
<li onclick="showTab('home')">âŒ‚ Trang chá»§</li>
<li onclick="closeMenu()">âœ• ÄÃ³ng</li>
</ul>
</div>
<div id="overlay" onclick="closeMenu()"></div>
<header>
<button id="menuToggle">â˜°</button>
<h1 style="font-size: 20px; margin: 0;">â˜¯ï¸  Audio Truyá»‡n Online</h1>
</header>
<marquee scrollamount="6" style="background: #00bcd4; color: white; padding: 10px; font-weight: bold;">
  ğŸ‰ Truyá»‡n sáº½ cáº­p nháº­t má»—i 6h sÃ¡ng thá»© 3-5-7, náº¿u báº¡n muá»‘n nghe truyá»‡n gÃ¬ cÃ³ thá»ƒ qua kÃªnh Youtube comment á»Ÿ dÆ°á»›i truyá»‡n!â¤
</marquee>
<div class="story-container fancy-border">
<h2 class="story-title">â‰› ToÃ n Bá»™ Truyá»‡n</h2>
<p class="blinking-text">â¬‡ï¸ Cuá»™n xuá»‘ng Ä‘á»ƒ xem Ä‘áº§y Ä‘á»§ truyá»‡n, nháº¥p vÃ o truyá»‡n Ä‘á»ƒ nghe</p>
<div style="padding: 10px; display: flex; gap: 10px;">
<input id="searchInput" placeholder="âœ  TÃ¬m truyá»‡n..." style="flex: 1; padding: 8px 12px; font-size: 16px; border-radius: 6px; border: none; outline: none; background: #222; color: white;" type="text"/>
<select id="genreSelect" style="padding: 8px 12px; font-size: 16px; border-radius: 6px; border: none; background: #222; color: white;">
<option value="all"> Táº¥t cáº£</option>
<option value="TiÃªn Hiá»‡p"> TiÃªn Hiá»‡p</option>
<option value="Huyá»n Huyá»…n"> Huyá»n Huyá»…n</option>
<option value="Há»‡ Thá»‘ng"> Há»‡ Thá»‘ng</option>
<option value="Äá»“ng NhÃ¢n"> Äá»“ng NhÃ¢n</option>
<option value="ÄÃ´ Thá»‹"> ÄÃ´ Thá»‹</option>
<option value="Máº¡t Tháº¿"> Máº¡t Tháº¿</option>
<option value="Khoa Huyá»…n"> Khoa Huyá»…n</option>
<option value="VÃµng Du"> VÃµng Du</option>
</select>
</div>
<main>
<div id="storyListView" style="max-height: 60vh; overflow-y: auto; padding-right: 6px;">
<div id="storyList"></div>
</div>
<div id="storyDetailView" style="display: none;"></div>
</main>
</div>
<!-- Quáº£ng bÃ¡ kÃªnh YouTube -->

<!-- âœ… KHUNG: Má»›i cáº­p nháº­t & Truyá»‡n Hot-->
<div class="story-container fancy-border" style="margin-bottom: 30px;">
<div style="display: flex; justify-content: center; gap: 16px; margin-bottom: 16px;">
<button id="btnLatestAdded" onclick="showSection('latestAdded')" style="padding: 8px 16px; border-radius: 6px; border: none; background: #00bcd4; color: white; font-weight: bold;">ğŸ“˜ Má»›i cáº­p nháº­t</button>
<button id="btnLatestChapters" onclick="showSection('latestChapters')" style="padding: 8px 16px; border-radius: 6px; border: none; background: #333; color: white; font-weight: bold;">ğŸ”¥ Truyá»‡n Hot</button>
</div>
<div class="story-list-grid" id="latestAdded"></div>
<div class="story-list-grid" id="latestChapters" style="display:none;"></div>
<div id="paginationControls" style="display:flex; justify-content:center; margin-top: 20px; gap: 6px;"></div>
</div>
<div class="support-admin">
<h3>ğŸ“º á»¦ng há»™ KÃªnh YouTube</h3>
<p style="font-size: 15px; color: #ccc; line-height: 1.6;">
    Báº¡n yÃªu thÃ­ch nhá»¯ng cÃ¢u chuyá»‡n táº¡i Ä‘Ã¢y? HÃ£y ghÃ© thÄƒm vÃ  <strong style="color: #00bcd4;">Ä‘Äƒng kÃ½ kÃªnh YouTube</strong> cá»§a chÃºng tÃ´i Ä‘á»ƒ:
  </p>
<ul style="text-align: left; max-width: 500px; margin: 10px auto; font-size: 14px; color: #bbb; padding-left: 20px; line-height: 1.5;">
<li> Nháº­n thÃ´ng bÃ¡o truyá»‡n má»›i má»—i ngÃ y</li>
<li> GÃ³p pháº§n tÄƒng view vÃ  phÃ¡t triá»ƒn cá»™ng Ä‘á»“ng</li>
</ul>
<div class="donate-buttons" style="margin-top: 14px;">
<a href="https://youtube.com/@kimtruyen-u5?si=fKcXyY5yq068KlLv " target="_blank">
<button style="background: #e53935;">ğŸ”¥ Truy cáº­p KÃªnh YouTube</button>
</a>
</div>
</div>
<p style="text-align:center; font-size:14px; color:#ccc; margin-top:6px;">
ğŸ’– Náº¿u tháº¥y web hay, hÃ£y á»§ng há»™ admin má»™t ly cÃ  phÃª nhÃ©!
</p>
<div style="text-align:center; margin-top:10px; display:flex; justify-content:center; gap:12px; flex-wrap:wrap;">
<a href="https://me.momo.vn/QDI7Tos6UBCVF8fQTDsdux/openRPkrN8YRe7A " target="_blank">
<button style="padding: 8px 16px; background: #d81b60; color: white; border: none; border-radius: 8px; font-size: 14px; cursor: pointer; box-shadow: 0 4px 10px rgba(216,27,96,0.3);">
      ğŸ“± á»¦ng há»™ qua MoMo
    </button>
</a>
<button onclick="document.getElementById('tpbankQR').style.display='block'" style="padding: 8px 16px; background: #7b1fa2; color: white; border: none; border-radius: 8px; font-size: 14px; cursor: pointer; box-shadow: 0 4px 10px rgba(123,31,162,0.3);">
    ğŸ¦ TPBank QR
  </button>
</div>
<!-- MÃ£ QR TPBank áº©n, sáº½ hiá»‡n khi báº¥m nÃºt -->
<div id="tpbankQR" style="display:none; margin-top: 12px; text-align: center;">
<p style="color:#ccc; font-size: 14px;">ğŸ“¸ QuÃ©t mÃ£ bÃªn dÆ°á»›i Ä‘á»ƒ chuyá»ƒn khoáº£n qua TPBank</p>
<img alt="QR TPBank" src="https://dl.dropbox.com/scl/fi/ha06b3fwu9npcs8cysc4u/IMG_1752585824710_1752585829396.jpg?rlkey=9b3oxa8lfy2cd7yd6w5zli84t&amp;st=2g7cbja2&amp;dl=0 " style="width: 180px; border-radius: 12px; border: 2px solid #00bcd4; box-shadow: 0 4px 10px rgba(0,188,212,0.3);"/>
<p style="color:#aaa; font-size:13px; margin-top:6px;">ğŸ’³ Chá»§ TK: <strong>DANG VAN QUYET</strong> â€“ TPBank: 00006481854</p>
</div>
<!-- Footer chuyÃªn nghiá»‡p -->
<div class="footer">
<div class="footer-column">
<img alt="Logo" src="https://dl.dropbox.com/scl/fi/j65z29jaysnkhnm3ufoz9/file_0000000080e061f9a39a9201ef51df08.png?rlkey=r40kvvuex2r8wx3n7yezzvfue&st=c0y2u6ce&dl=0  " style="width: 80px; margin-bottom: 10px;"/>
<p>AudioTruyenOnline cÃ³ nhiá»u thá»ƒ loáº¡i khÃ¡c nhau, tá»« truyá»‡n cá»• tÃ­ch, kiáº¿m hiá»‡p, ma, ngÃ´n tÃ¬nh Ä‘áº¿n xuyÃªn khÃ´ng, Ä‘á»“ng nhÃ¢n, há»‡ thá»‘ng...</p>
</div>
<div class="footer-column">
<h4>ğŸ“Š Thá»ƒ Loáº¡i Äá»“ng NhÃ¢n</h4>
<ul>
<li>Äá»“ng nhÃ¢n Onepiece</li>
<li>Äá»“ng nhÃ¢n Hokage</li>
<li>Äá»“ng nhÃ¢n Äáº¥u La</li>
<li>Äá»“ng nhÃ¢n Marvel</li>
</ul>
</div>
<div class="footer-column">
<h4>ğŸ¤ Giá»ng Ä‘á»c ná»•i báº­t</h4>
<ul>
<li>Má»¹ NhÃ¢n</li>
<li>Ngá»c BÃ­ch</li>
<li>ÄÃ¬nh Soáº¡n</li>
<li>MC Tiáº¿n Phong</li>
</ul>
</div>
<div class="footer-column">
<h4>ğŸ“ˆ Thá»‘ng kÃª truy cáº­p</h4>
<ul>
<li>Online: 109</li>
<li>HÃ´m nay: 619</li>
<li>HÃ´m qua: 536</li>
<li>Tá»•ng: 6.564</li>
</ul>
</div>
</div>
<div class="footer-bottom" style="text-align:center; color:#bbb; font-size:13px; margin-top: 16px;">
  Â© Copyright 2025 - AudioTruyenOnline. All rights reserved.
</div>
<script>
    const stories = [
        {
  id: "1",
  title: "Fairy tail: Kháº¯c kim liá»n cÃ³ thá»ƒ trá»Ÿ nÃªn máº¡nh máº½ ",
  genre: "Äá»“ng NhÃ¢n",
  status: "ÄÃ£ full", 
  lastUpdated: "2025-07-18",
  description: "TrÃ¬nh Phong xuyÃªn Ä‘áº¿n tháº¿ giá»›i Fairy Tail. Háº¯n mang theo há»‡ thá»‘ng rÃºt tháº» â€“ cÃ³ tiá»n lÃ  cÃ³ thá»ƒ há»c ma phÃ¡p, triá»‡u há»“i sá»©c máº¡nh. Chá»‰ cáº§n Ä‘Ãºng lÃºc rÃºt tháº» máº¡nh, háº¯c long cÅ©ng pháº£i khuáº¥t phá»¥c.",
  cover: "https://dl.dropbox.com/scl/fi/rtsr1336n77sqsiu7f9bq/p2o67a5aae10a58c76ae0f7209587d664eb.png?rlkey=t8retech9xvo3041l8bf8aoy6&dl=1",
  chapters: [
    { title: "Táº­p 1 XuyÃªn Qua", audio: "https://dl.dropbox.com/scl/fi/ucl8iefoptpp85blj29g2/1_1.mp3?rlkey=wpjpo73v9cuzjthz1acc6wia2&dl=1" },
    { title: "Táº­p 2 NÄƒm Má»›i", audio: "https://dl.dropbox.com/scl/fi/fohkbbk2m4l2fjbn94gkp/8_1.mp3?rlkey=xhu7c0k625o0gzy21mxvplnh1&dl=1" },
    { title: "Táº­p 3 Dung Há»£p Ma Lá»±c", audio: "https://dl.dropbox.com/scl/fi/hs2voios376zty0cvm9w3/15_1.mp3?rlkey=95rxewn8gofcwipr79ygciy93&dl=1" },
    { title: "Táº­p 4 Muá»™i Khá»‘ng", audio: "https://dl.dropbox.com/scl/fi/okh8efslm3mvngsfzx67x/22_1.mp3?rlkey=a299m8qznvskid15zf64mrlqy&dl=1" }
  ]
},
{
  id: "2",
  title: "Kiá»ƒm kÃª long chÃ¢u biáº¿n thÃ¢n, ngÆ°á»i Saiyan rung Ä‘á»™ng váº¡n giá»›i",
  genre: ["Äá»“ng NhÃ¢n", "Há»‡ Thá»‘ng"],
  status: "Äang cáº­p nháº­t", 
  lastUpdated: "2025-07-21",
  description: "LÃ¢m Láº¡c xuyÃªn qua tháº¿ giá»›i Dragon Ball, Ä‘Ãºng lÃºc gáº·p ngÆ°á»i Saiyan xÃ¢m láº¥n. Äá»§ loáº¡i cÆ°á»ng Ä‘áº¡i nhÃ¢n váº­t pháº£n diá»‡n sáº¯p xuáº¥t hiá»‡n, thÃ¢n lÃ  ngÆ°á»i bÃ¬nh thÆ°á»ng vÃ´ cÃ¹ng nguy hiá»ƒm. May máº¯n váº¡n giá»›i video lÆ°á»›i má»i LÃ¢m Láº¡c vÃ o á»Ÿ, tá»• chá»©c biáº¿n thÃ¢n hoáº¡t Ä‘á»™ng: upload video biáº¿n thÃ¢n vÃ  chiáº¿n tháº¯ng sáº½ nháº­n Ä‘Æ°á»£c nÄƒng lá»±c lÃ m ban thÆ°á»Ÿng. NhÃ¬n ná»™i dung hoáº¡t Ä‘á»™ng, LÃ¢m Láº¡c báº­t cÆ°á»i. Luáº­n thá»±c lá»±c, long chÃ¢u khÃ´ng pháº£i máº¡nh nháº¥t. NhÆ°ng luáº­n biáº¿n thÃ¢n, ngÆ°á»i Saiyan nÃ³i thá»© hai, ai dÃ¡m nÃ³i Ä‘á»‡ nháº¥t? Tá»« SiÃªu Saiya 1, 2, 3... Ä‘áº¿n tháº§n, siÃªu lam, cá»±c Ã½, dÃ£ thÃº ngá»™ cÆ¡m... Khi LÃ¢m Láº¡c Ä‘Äƒng tá»«ng video biáº¿n thÃ¢n, chÆ° thiÃªn váº¡n giá»›i Ä‘á»u rung Ä‘á»™ng!",
  cover: "https://dl.dropbox.com/scl/fi/cjvgzch0ukc3jja5mull5/p2o777454baf7beae0739f3ac129b4d2123-tplv-shrink_640_0.image.png?rlkey=tjrd337ox7r1r8waqxe5vnqnj&st=5zs1qvhg&dl=0",
  chapters: [
    {
      title: "Táº­p 1: Cho chÆ° thiÃªn váº¡n giá»›i mang Ä‘áº¿n ngÆ°á»i Saiyan biáº¿n thÃ¢n rung Ä‘á»™ng!",
      audio: "https://dl.dropbox.com/scl/fi/1t6ji3vj5k792ii3bfhtu/1-10_1.mp3?rlkey=rpfb6re4bkfi3cs3lcn6o4of5&st=akqbzr5j&dl=0"
    },
    {
      title: "Táº­p 2: Hiá»n lÃ nh ngÆ°á»i nhÃ¢n táº¡o, váº¡n giá»›i cáº£m khÃ¡i",
      audio: "https://dl.dropbox.com/scl/fi/6oz2gvxz5dzy4pdp6g52m/41-50_1.mp3?rlkey=2iul9ccu8nnhn3tgqs4uw956l&st=bzru9ctt&dl=0"
    },
    {
      title: "Táº­p 3: Ma NhÃ¢n Buu ma phÃ¡p, Dabura cháº¿t lÃ£o tháº£m rÃ´Ì€i",
      audio: "https://dl.dropbox.com/scl/fi/n6aqtyiv5yl78fet6ya3c/81-90_1.mp3?rlkey=0tyqwtp1jr7y2nzgidbx956uu&st=9p62ze1s&dl=0"
    }
  ]
}

    ];


const storyListEl = document.getElementById('storyList');
const searchInput = document.getElementById('searchInput');
const menuToggle = document.getElementById('menuToggle');
const sidebar = document.getElementById('sidebar');
const overlay = document.getElementById('overlay');
const genreSelect = document.getElementById('genreSelect');

let filteredStories = stories;

menuToggle.addEventListener('click', () => {
  sidebar.classList.add('active');
  overlay.classList.add('active');
});

overlay.addEventListener('click', closeMenu);

function closeMenu() {
  sidebar.classList.remove('active');
  overlay.classList.remove('active');
}

function openPlayer(story) {
  closeMenu();
  document.getElementById('storyListView').style.display = 'none';
  const detailView = document.getElementById('storyDetailView');
  detailView.style.display = 'block';

  const saved = JSON.parse(localStorage.getItem('audioStatus') || '{}');
  let chapterToPlay = story.chapters[0];

  if (saved.audioSrc && story.chapters.some(ch => ch.audio === saved.audioSrc)) {
    chapterToPlay = story.chapters.find(ch => ch.audio === saved.audioSrc);
  }

  const audioTitle = chapterToPlay.title;

  // Náº¿u cÃ³ dá»¯ liá»‡u nghe cÅ© vÃ  cÃ¹ng táº­p, táº¡o há»™p resume
  const resumeBox = (saved.audioSrc === chapterToPlay.audio && saved.currentTime > 5)
    ? `
      <div id="resumeBox" style="margin-top: 20px; background: #003300; color: white; padding: 10px 16px; border-radius: 12px; text-align: center;">
        ğŸ” Báº¡n Ä‘Ã£ nghe Ä‘áº¿n <strong>${formatTime(saved.currentTime)}</strong> á»Ÿ táº­p <strong>${saved.chapterTitle}</strong><br/>
        <button onclick="resumeAudio()" style="margin-top: 8px; background: #00c853; color: white; border: none; padding: 8px 14px; border-radius: 6px; cursor: pointer;">
          â–¶ï¸ Nghe tiáº¿p tá»« ${formatTime(saved.currentTime)}
        </button>
      </div>` : '';

  detailView.innerHTML = `
    <div style="display: flex; gap: 16px; flex-wrap: wrap;">
      <img src="${story.cover}" style="width: 140px; height: 140px; object-fit: cover; border-radius: 12px;" />
      <div style="flex: 1; min-width: 220px;">
        <h2 style="color: #00bcd4;">${story.title}</h2>
        <p><strong>ğŸ“ Thá»ƒ loáº¡i:</strong> ${story.genre || 'KhÃ´ng rÃµ'}</p>
        <p><strong>ğŸ“Š Tráº¡ng thÃ¡i:</strong> <span style="color:${getStatusColor(story.status)};">${story.status || "Äang cáº­p nháº­t"}</span></p>
        <p><strong>ğŸ§ Sá»‘ táº­p:</strong> ${story.chapters.length}</p>
        <p style="font-size: 14px; color: #ccc;">${story.description}</p>
      </div>
    </div>

    <div class="audio-player" style="margin-top: 20px;">
      <p style="color: #00bcd4;">ğŸ§ Äang phÃ¡t: <span id="currentChapterTitle">${audioTitle}</span></p>
      <audio id="audioPlayer" src="${chapterToPlay.audio}"></audio>
      <div class="progress-container">
        <input type="range" id="progressBar" value="0" step="1" min="0" max="100">
      </div>
      <div style="display: flex; justify-content: space-between; font-size: 13px; color: #aaa; max-width: 600px; margin: 0 auto;">
        <span id="currentTime">00:00</span>
        <span id="duration">00:00</span>
      </div>
      <div class="controls">
        <button id="rewindBtn">â®ï¸ 10s</button>
        <button id="playPauseBtn">â–¶ï¸</button>
        <button id="forwardBtn">10s â­ï¸</button>
        <label>
          ğŸ”Š Tá»‘c Ä‘á»™:
          <input type="range" id="speedSlider" min="0.5" max="3" step="0.1" value="1" />
          <span id="speedValue">1.0x</span>
        </label>
      </div>
    </div>

    ${resumeBox}

    <div id="chapterList" class="chapter-container">
  <h3 style="color: #00bcd4; font-size: 20px; margin-bottom: 12px;">ğŸ“š Danh sÃ¡ch táº­p:</h3>
  <table class="chapter-table">
    <thead>
      <tr>
        <th>#</th>
        <th>TÃªn Táº­p</th>
        <th>Nghe</th>
      </tr>
    </thead>
    <tbody>
      ${story.chapters.map((ch, i) => `
        <tr onclick="playChapter('${ch.audio}', this)">
          <td>${i + 1}</td>
          <td>${ch.title}</td>
          <td><button>â–¶ï¸ PhÃ¡t</button></td>
        </tr>
      `).join('')}
    </tbody>
  </table>
</div>

    <button class="back-btn" onclick="backToList()">âŒ« Quay láº¡i</button>
  `;

  setupAudioPlayer(story, chapterToPlay);
}

function setupAudioPlayer(story, currentChapter) {
  const audio = document.getElementById('audioPlayer');
  const playBtn = document.getElementById('playPauseBtn');
  const rewindBtn = document.getElementById('rewindBtn');
  const forwardBtn = document.getElementById('forwardBtn');
  const speedSlider = document.getElementById('speedSlider');
  const progressBar = document.getElementById('progressBar');
  const currentTimeDisplay = document.getElementById('currentTime');
  const durationDisplay = document.getElementById('duration');
  const currentChapterTitleEl = document.getElementById('currentChapterTitle');

  const saved = JSON.parse(localStorage.getItem('audioStatus') || '{}');
  if (saved.audioSrc === audio.src) {
    audio.currentTime = saved.currentTime || 0;
    audio.playbackRate = saved.speed || 1;
    speedSlider.value = saved.speed || 1;
    document.getElementById('speedValue').textContent = `${audio.playbackRate.toFixed(1)}x`;
  }

  audio.addEventListener('timeupdate', () => {
    if (!audio.duration) return;
    progressBar.value = (audio.currentTime / audio.duration) * 100;
    currentTimeDisplay.textContent = formatTime(audio.currentTime);
    durationDisplay.textContent = isNaN(audio.duration) ? '00:00' : formatTime(audio.duration);
  });

  progressBar.addEventListener('input', () => {
    audio.currentTime = (progressBar.value / 100) * audio.duration;
  });

  playBtn.onclick = () => {
    if (audio.paused) {
      audio.play();
      playBtn.textContent = 'â—¼ï¸';
    } else {
      audio.pause();
      playBtn.textContent = 'â–¶ï¸';
    }
  };

  rewindBtn.onclick = () => { audio.currentTime -= 10; };
  forwardBtn.onclick = () => { audio.currentTime += 10; };

  speedSlider.oninput = () => {
  const rate = parseFloat(speedSlider.value);
  audio.playbackRate = rate;
  document.getElementById('speedValue').textContent = rate.toFixed(1) + 'x';

  // âœ… LÆ°u láº¡i tá»‘c Ä‘á»™ vÃ o localStorage
  const saved = JSON.parse(localStorage.getItem('audioStatus') || '{}');
  saved.speed = rate;
  localStorage.setItem('audioStatus', JSON.stringify(saved));
};

  audio.onended = () => {
    const idx = story.chapters.findIndex(ch => ch.audio === audio.src);
    const next = story.chapters[idx + 1];
    if (next) {
      playChapter(next.audio, document.querySelectorAll('#chapterUl li')[idx + 1]);
    }
  };

  window.onbeforeunload = () => {
    localStorage.setItem('audioStatus', JSON.stringify({
      chapterTitle: currentChapterTitleEl?.textContent || '',
      audioSrc: audio.src,
      speed: audio.playbackRate,
      currentTime: audio.currentTime
    }));
  };
}

function playChapter(audioURL, element) {
  const audio = document.getElementById('audioPlayer');
  const playBtn = document.getElementById('playPauseBtn');
  const speedSlider = document.getElementById('speedSlider');
  const speedValue = document.getElementById('speedValue');

  const saved = JSON.parse(localStorage.getItem('audioStatus') || '{}');
  const rate = saved.speed || 1;

  audio.src = audioURL;
  audio.playbackRate = rate;
  speedSlider.value = rate;
  speedValue.textContent = rate.toFixed(1) + 'x';

  audio.currentTime = 0;
  audio.play().then(() => {
    playBtn.textContent = 'â—¼ï¸ ';
  });

  document.getElementById('currentChapterTitle').textContent = element.textContent;

  const allItems = document.querySelectorAll('#chapterUl li');
  allItems.forEach(li => li.style.fontWeight = 'normal');
  element.style.fontWeight = 'bold';

  localStorage.setItem('audioStatus', JSON.stringify({
    chapterTitle: element.textContent,
    audioSrc: audioURL,
    speed: rate,
    currentTime: 0
  }));
}

function backToList() {
  document.getElementById('storyDetailView').style.display = 'none';
  document.getElementById('storyListView').style.display = 'block';
  renderStories(filteredStories);
}

function getProgressText(story) {
  const saved = JSON.parse(localStorage.getItem('audioStatus') || '{}');
  if (!saved.audioSrc || !saved.chapterTitle || saved.currentTime == null) return '';

  const hasChapter = story.chapters.some(ch => ch.audio === saved.audioSrc);
  if (!hasChapter) return '';

  return `ğŸ“Œ ÄÃ£ nghe Ä‘áº¿n: ${saved.chapterTitle} (${formatTime(saved.currentTime)})`;
}


function getStatusColor(status) {
  switch ((status || "").toLowerCase()) {
    case "Ä‘Ã£ full": return "#00e676";
    case "táº¡m dá»«ng": return "#ff9800";
    case "drop": return "#f44336";
    default: return "#00bcd4"; // Äang cáº­p nháº­t
  }
}

function renderStories(storyList) {
  storyListEl.innerHTML = '';
  storyList.forEach(story => {
    const card = document.createElement('div');
    card.className = 'story-row';
    card.onclick = () => openPlayer(story);
    const progressText = getProgressText(story);

card.innerHTML = `
  <img src="${story.cover}" class="story-thumb" alt="${story.title}" />
  <div class="story-meta">
    <h3>${story.title}</h3>
    <p>ğŸ“Š ${story.status || "Äang cáº­p nháº­t"} â€“ ${story.genre}</p>
    <p>ğŸ§ ${story.chapters.length} táº­p</p>
    <div class="description-box">${story.description}</div>
    ${progressText ? `<p style="color:#00e676; font-size:13px;">${progressText}</p>` : ''}
  </div>`;
    storyListEl.appendChild(card);
  });
}


function applyFilters() {
  const keyword = searchInput.value.toLowerCase();
  const selectedGenre = genreSelect.value;

  filteredStories = stories.filter(story => {
    const matchTitle = story.title.toLowerCase().includes(keyword);
    const matchGenre =
      selectedGenre === 'all' ||
      (Array.isArray(story.genre)
        ? story.genre.includes(selectedGenre)
        : story.genre === selectedGenre);
    return matchTitle && matchGenre;
  });

  renderStories(filteredStories);
}

searchInput.addEventListener('input', applyFilters);
genreSelect.addEventListener('change', applyFilters);

function formatTime(time) {
  const minutes = Math.floor(time / 60);
  const seconds = Math.floor(time % 60);
  return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
}

function init() {
  filteredStories = stories;
  renderStories(filteredStories);
}

init();

function resumeAudio() {
  const saved = JSON.parse(localStorage.getItem('audioStatus') || '{}');
  const audio = document.getElementById('audioPlayer');
  const playBtn = document.getElementById('playPauseBtn');

  if (audio && saved.audioSrc === audio.src) {
    audio.currentTime = saved.currentTime || 0;
    audio.play().then(() => {
      playBtn.textContent = 'â—¼ï¸ ';
    });
  }
}


const latestPerPage = 5;
let currentPage = 1;
let currentTab = 'latestAdded';

function showSection(tab) {
  currentTab = tab;
  currentPage = 1;
  document.getElementById('latestAdded').style.display = tab === 'latestAdded' ? 'block' : 'none';
  document.getElementById('latestChapters').style.display = tab === 'latestChapters' ? 'block' : 'none';
  document.getElementById('btnLatestAdded').style.background = tab === 'latestAdded' ? '#00bcd4' : '#333';
  document.getElementById('btnLatestChapters').style.background = tab === 'latestChapters' ? '#00bcd4' : '#333';
  renderLatestList();
}

function renderLatestList() {
  const container = currentTab === 'latestAdded' ? document.getElementById('latestAdded') : document.getElementById('latestChapters');
  container.innerHTML = '';
  let list = [...stories];
  if (currentTab === 'latestAdded') {
    list = list.slice(-20).reverse();
  } else {
    list = list.filter(story => story.lastUpdated)
               .sort((a, b) => new Date(b.lastUpdated) - new Date(a.lastUpdated))
               .slice(0, 20);
  }
  const start = (currentPage - 1) * latestPerPage;
  const currentList = list.slice(start, start + latestPerPage);
  currentList.forEach(story => {
    const row = document.createElement('div');
    row.className = 'mini-row';
    row.onclick = () => openPlayer(story);
    row.innerHTML = `
      <img src="${story.cover}" class="mini-thumb" />
      <div class="mini-info">
        <h4>${story.title}</h4>
        <p>${story.chapters.length} táº­p â€“ ${story.genre}</p>
      </div>`;
    container.appendChild(row);
  });
  renderPagination(list.length);
}

function renderPagination(totalItems) {
  const totalPages = Math.ceil(totalItems / latestPerPage);
  const paginationEl = document.getElementById('paginationControls');
  paginationEl.innerHTML = '';
  for (let i = 1; i <= totalPages; i++) {
    const btn = document.createElement('button');
    btn.className = 'pagination-button' + (i === currentPage ? ' active' : '');
    btn.textContent = i;
    btn.onclick = () => {
      currentPage = i;
      renderLatestList();
    };
    paginationEl.appendChild(btn);
  }
}

showSection('latestAdded');
</script>
</body>
</html>
